<h1>mdref</h1>

<?php if (isset($exception)) : ?>
	<?=\mdref\ExceptionHandler::html($exception, ["h2"], ["p"], ["pre", "style='overflow-x:scroll'"]); ?>
<?php else : ?>
	<?php if (isset($listing) && count($listing)) : ?>
		<h2>Available References</h2>
		<?php foreach ($listing as $entry) : ?>
			<h3><a href="<?=$entry->formatUrl()?>"><?=$entry->formatLink()?></a></h3>
			<?php $entry->recurse($refs, "/*.md", function($entry, $pattern, callable $recursor) { ?>
			<ul>
				<li><p><a href="<?=$entry->formatUrl()?>"><?=$entry->formatLink()?></a></p>
					<?php
						if (!isset($html)) {
							$html = new \mdref\Markdown;
						}
						echo $html->quick($entry->readDescription());
						$recursor($entry, "/[A-Z]*.md");
					?>
				</li>
			</ul>
			<?php }); ?>
		<?php endforeach; ?>
	<?php endif; ?>
<?php endif; ?>
